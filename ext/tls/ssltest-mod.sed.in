# "axTLS/ssl/test/ssltest.c" modification script

# add header and "safe_system()" prototype
1 {
  i /* This is generated file. Don't edit! */
  i
  i int safe_system(const char*);
  i
}

# replace path name
s|\.\./ssl/|@abs_srcdir@/axTLS/ssl/|g
s|openssl |@abs_builddir@/kick_openssl.sh |g

# replace to "safe_system()"
s/system/safe_system/g

# include "safe_system()" code
$ {
  a
  a #include "@abs_srcdir@/system-fix.c"
}
